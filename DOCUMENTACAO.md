# LPMS - Sistema de Gestão de Escritório de Advocacia\n\n## Documentação Completa\n\n### Índice\n1. [Visão Geral](#visão-geral)\n2. [Arquitetura](#arquitetura)\n3. [Funcionalidades](#funcionalidades)\n4. [Guia de Uso](#guia-de-uso)\n5. [APIs](#apis)\n6. [Configuração](#configuração)\n7. [Troubleshooting](#troubleshooting)\n\n---\n\n## Visão Geral\n\nO LPMS (Legal Practice Management System) é um sistema web completo para gerenciamento de escritórios de advocacia especializados em ações de servidores públicos. O sistema integra:\n\n- **Dashboard** com visão geral de demandas e KPIs\n- **Controle Processual** unificado\n- **Onboarding de Clientes** com geração automática de PDFs\n- **Consulta Pública de Andamento** com integração TJDFT\n- **Módulo Financeiro** com fluxo de caixa e previsão de RPVs\n- **Automação de Petições** com IA\n- **Descoberta de Oportunidades** inteligente\n- **Resposta Sistematizada** a clientes\n\n---\n\n## Arquitetura\n\n### Stack Tecnológico\n\n**Frontend:**\n- React 19\n- TypeScript\n- Vite (build tool)\n- CSS3 com gradientes e animações\n- Responsive design\n\n**Backend:**\n- Express.js\n- TypeScript\n- Prisma ORM\n- PostgreSQL\n- JWT para autenticação\n- OpenAI API para IA\n\n**Hospedagem:**\n- Render.com ou Railway (gratuito)\n- PostgreSQL em nuvem\n- S3 para armazenamento de arquivos\n\n### Estrutura de Diretórios\n\n```\nlpms_servidores_publicos/\n├── src/\n│   ├── components/          # Componentes React\n│   │   ├── Dashboard.tsx\n│   │   ├── ClienteOnboarding.tsx\n│   │   ├── ConsultaAndamento.tsx\n│   │   ├── ModuloFinanceiro.tsx\n│   │   ├── AutomacaoPeticoes.tsx\n│   │   ├── DescoberAOportunidades.tsx\n│   │   └── RespostaSistematizada.tsx\n│   ├── styles/              # Arquivos CSS\n│   │   └── *.css\n│   ├── server/              # Backend Express\n│   │   ├── index.ts         # Servidor principal\n│   │   ├── auth.ts          # Autenticação\n│   │   ├── middleware.ts    # Middlewares\n│   │   ├── services/        # Serviços de negócio\n│   │   │   ├── pdfGenerator.ts\n│   │   │   ├── tjdftService.ts\n│   │   │   ├── peticaoService.ts\n│   │   │   └── oportunidadeService.ts\n│   │   └── routes/          # Rotas da API\n│   │       ├── auth.ts\n│   │       ├── clientes.ts\n│   │       ├── processos.ts\n│   │       ├── documentos.ts\n│   │       ├── andamento.ts\n│   │       ├── financeiro.ts\n│   │       ├── peticoes.ts\n│   │       ├── oportunidades.ts\n│   │       └── respostas.ts\n│   ├── App.tsx              # Componente principal\n│   ├── main.tsx             # Ponto de entrada\n│   └── index.css            # Estilos globais\n├── prisma/\n│   └── schema.prisma        # Schema do banco de dados\n├── index.html               # HTML principal\n├── vite.config.ts           # Configuração do Vite\n├── tsconfig.json            # Configuração do TypeScript\n├── package.json             # Dependências\n├── .env.example             # Variáveis de ambiente exemplo\n├── README.md                # Instruções de uso\n├── DOCUMENTACAO.md          # Esta documentação\n└── todo.md                  # Lista de tarefas\n```\n\n---\n\n## Funcionalidades\n\n### 1. Dashboard\n- Visão geral de KPIs\n- Total de clientes\n- Total de processos\n- Processos ativos\n- Prazos vencidos\n- Oportunidades identificadas\n- Receita prevista\n\n### 2. Controle Processual\n- Listagem de prazos processuais\n- Listagem de novas ações\n- Controle de processos administrativos\n- Alertas de prazos próximos\n- Gestão de dependências\n\n### 3. Onboarding de Clientes\n- Página pública com formulário 4 passos\n- Coleta de dados pessoais\n- Coleta de dados profissionais\n- Geração automática de PDFs:\n  - Procuração\n  - Contrato\n  - Declaração de Hipossuficiência\n- Upload de documentos assinados\n- Rastreamento de tarefas pendentes\n\n### 4. Consulta de Andamento Processual\n- Página pública sem autenticação\n- Busca por CPF ou número do processo\n- Integração com TJDFT\n- Análise por IA com resumo humanizado\n- Exibição de status e prazos\n\n### 5. Módulo Financeiro\n- Dashboard financeiro\n- Fluxo de caixa\n- Previsão de RPVs\n- Automação de prazos\n- Relatórios financeiros\n- Estatísticas de receita\n\n### 6. Automação de Petições\n- Geração de petições baseada em modelos\n- Análise de documentos\n- Geração de resumos\n- Validação de qualidade\n- Integração com IA (OpenAI)\n- Tipos suportados:\n  - Réplica\n  - Recurso\n  - Contra-razão\n  - Embargo\n  - Petição Inicial\n\n### 7. Descoberta de Oportunidades\n- Análise individual de clientes\n- Análise em massa\n- Identificação de teses aplicáveis\n- Cálculo de confiança\n- Priorização automática\n- Relatórios de oportunidades\n- Teses suportadas:\n  - Licença-Prêmio\n  - Abono Permanência\n  - Diferenças Salariais\n  - Gratificação\n  - Indenização\n\n### 8. Resposta Sistematizada\n- Geração de respostas padronizadas\n- Templates para diferentes tipos de perguntas\n- Envio via WhatsApp, E-mail ou SMS\n- Histórico de respostas\n- Personalização de respostas\n\n---\n\n## Guia de Uso\n\n### Acesso ao Sistema\n\n1. Acesse o link do sistema (fornecido após hospedagem)\n2. Faça login com seu e-mail e senha\n3. Você será direcionado para a Dashboard\n\n### Fluxo Típico de Trabalho\n\n#### Onboarding de Novo Cliente\n1. Cliente acessa a página pública de onboarding\n2. Preenche dados pessoais e profissionais\n3. Baixa os PDFs (Procuração, Contrato, Declaração)\n4. Assina digitalmente os documentos\n5. Faz upload dos documentos assinados\n6. Sistema registra o novo cliente\n\n#### Geração de Petição\n1. Acesse \"Automação de Petições\"\n2. Selecione o tipo de petição (Réplica, Recurso, etc)\n3. Escolha a tese jurídica\n4. Preencha informações do cliente e processo\n5. Clique em \"Gerar Petição\"\n6. Revise e personalize se necessário\n7. Baixe o PDF da petição\n\n#### Descoberta de Oportunidades\n1. Acesse \"Descoberta de Oportunidades\"\n2. Selecione um cliente ou \"Analisar Todos\"\n3. Sistema analisa e identifica teses aplicáveis\n4. Revise as oportunidades com filtros\n5. Clique em \"Ajuizar Ação\" para processos aplicáveis\n\n#### Resposta a Cliente\n1. Acesse \"Resposta Sistematizada\"\n2. Preencha dados do cliente e pergunta\n3. Selecione tipo de resposta\n4. Escolha canal de envio (WhatsApp, E-mail, SMS)\n5. Clique em \"Gerar Resposta\"\n6. Revise e personalize se necessário\n7. Clique em \"Enviar\"\n\n---\n\n## APIs\n\n### Autenticação\n\n**POST /api/auth/register**\n```json\n{\n  \"email\": \"user@example.com\",\n  \"password\": \"password123\",\n  \"nome\": \"João Silva\"\n}\n```\n\n**POST /api/auth/login**\n```json\n{\n  \"email\": \"user@example.com\",\n  \"password\": \"password123\"\n}\n```\n\n**GET /api/auth/me**\nRetorna dados do usuário autenticado\n\n### Clientes\n\n**GET /api/clientes** - Listar clientes\n**GET /api/clientes/:id** - Obter cliente\n**POST /api/clientes** - Criar cliente\n**PUT /api/clientes/:id** - Atualizar cliente\n**DELETE /api/clientes/:id** - Deletar cliente\n\n### Processos\n\n**GET /api/processos** - Listar processos\n**GET /api/processos/:id** - Obter processo\n**POST /api/processos** - Criar processo\n**PUT /api/processos/:id** - Atualizar processo\n**DELETE /api/processos/:id** - Deletar processo\n\n### Petições\n\n**POST /api/peticoes/gerar** - Gerar petição\n**POST /api/peticoes/analisar** - Analisar documento\n**POST /api/peticoes/resumo** - Gerar resumo\n**POST /api/peticoes/validar** - Validar petição\n**GET /api/peticoes** - Listar petições\n**GET /api/peticoes/:id** - Obter petição\n\n### Oportunidades\n\n**POST /api/oportunidades/analisar-cliente** - Analisar cliente\n**POST /api/oportunidades/analisar-massa** - Analisar múltiplos clientes\n**POST /api/oportunidades/relatorio** - Gerar relatório\n**POST /api/oportunidades/priorizar** - Priorizar oportunidades\n**GET /api/oportunidades** - Listar oportunidades\n\n### Respostas\n\n**POST /api/respostas/gerar** - Gerar resposta\n**POST /api/respostas/enviar** - Enviar resposta\n**GET /api/respostas** - Listar respostas\n**GET /api/respostas/:id** - Obter resposta\n\n---\n\n## Configuração\n\n### Variáveis de Ambiente\n\nCrie um arquivo `.env` com as seguintes variáveis:\n\n```env\n# Database\nDATABASE_URL=postgresql://user:password@localhost:5432/lpms\n\n# JWT\nJWT_SECRET=seu_secret_jwt_aqui\n\n# OpenAI API\nOPENAI_API_KEY=sk-...\n\n# Server\nPORT=3000\nNODE_ENV=production\n\n# Frontend\nVITE_API_URL=http://localhost:3000\n```\n\n### Instalação de Dependências\n\n```bash\npnpm install\n```\n\n### Executar em Desenvolvimento\n\n```bash\npnpm dev\n```\n\n### Build para Produção\n\n```bash\npnpm build\npnpm start\n```\n\n---\n\n## Troubleshooting\n\n### Erro: \"Database connection failed\"\n- Verifique se a variável `DATABASE_URL` está correta\n- Confirme que o banco de dados está acessível\n- Teste a conexão com `psql`\n\n### Erro: \"OpenAI API key invalid\"\n- Verifique se a variável `OPENAI_API_KEY` está configurada\n- Confirme que a chave é válida\n- Teste a chave na dashboard do OpenAI\n\n### Erro: \"JWT token expired\"\n- Faça login novamente\n- Limpe os cookies do navegador\n- Verifique se a variável `JWT_SECRET` é consistente\n\n### Página em branco\n- Verifique o console do navegador (F12)\n- Verifique os logs do servidor\n- Limpe o cache do navegador (Ctrl+Shift+Del)\n\n---\n\n## Suporte\n\nPara dúvidas ou problemas, entre em contato com a equipe de desenvolvimento.\n\n---\n\n**Versão:** 1.0.0\n**Data:** 28/10/2025\n**Status:** Produção\n
